<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: random-walk.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: random-walk.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** Universidad de La Laguna
 * Escuela Superior de Ingeniería y Tecnología
 * Grado en Ingeniería Informática
 * Asignatura: Programación de Aplicaciones Interactivas
 * Curso: 3º
 * Práctica 9 PAI - Random Walk
 * @file random-walk.js
 * @author Rafael Cala
 * Correo: alu0101121901@ull.edu.es
 * @since 20/04/20
 * @version 1.0.0
 * @description Fichero que contiene el programa principal, que es invocada
 * desde el .html, iniciando la ejecución del Random Walk mediante la función
 * createRandomPath
 */

"use strict";

const CANVAS = document.getElementById("randomwalk");

/**
 * Inclusión de las clases que se encuentran en otros ficheros
 * comprobando si la ejecución se da en un navegador o en el node.
 */
let ClassGrid, ClassRandomStep;

if (typeof require !== 'undefined') {
  ClassRandomStep = require('./random-step.js').RandomStep;
  ClassGrid = require('./grid.js').Grid;
}
else {
  ClassRandomStep = RandomStep;
  ClassGrid = Grid;
}

/**
 * @description Función asíncrona que pinta pasos en la cuadrícula hasta
 * encontrarse con alguna de las paredes del canvas. El trazo de la línea
 * en el canvas sufre un pequeño retardo de 0.5, de modo que se pueda ver qué
 * caminos va tomando el random walk. 
 * @param {Object} randomSteps Objeto de la clase RandomStep
 * @param {Object} ctx Contexto 2D del canvas
 */
async function createRandomPath(randomSteps, ctx) {
  let steps = 0;
    while(randomSteps.insideOfGrid()) {
      let position1 = randomSteps.currentPosition;
      await sleep(350);
      randomSteps.step();
      await sleep (150);
      let position2 = randomSteps.currentPosition;
      ctx.moveTo(position1[0], position1[1]);
      ctx.lineTo(position2[0], position2[1]);
      ctx.lineWidth = 3;
      ctx.strokeStyle = 'blue';
      ctx.stroke();
      steps++;
    }
    await sleep(500);
    alert("Fin de la animación con " + steps + " pasos dados.");

}

/**
 * @description Programa principal que crea los objetos e invoca los métodos
 * necesarios para el funcionamiento de la práctica
 */
function main () {
  
  if (CANVAS.getContext) {
    const ctx = CANVAS.getContext('2d');
    ctx.beginPath();
    let lines = 20;
    const GRID = new ClassGrid(lines, CANVAS, ctx);
    GRID.initialize();
    const MIDDLE_POINT = [CANVAS.width / 2, CANVAS.height / 2];
    const STEPS = new ClassRandomStep(GRID.length, MIDDLE_POINT, CANVAS, ctx);
    createRandomPath(STEPS, ctx);
  }
}

/**
 * @description Función que detiene la ejecución durante un tiempo dado en el 
 * lugar que se invoque. El método que invoque sleep deberá ser asíncrono.
 * @param {Number} miliseconds Cantidad de milisegundos que permanece dormida
 * la ejecución.
 */
function sleep (miliseconds) {
  return new Promise(resolve => setTimeout(resolve, miliseconds))
}

main();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="rafael-cala-glez-random-walk-doc.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Constructor%2520de%2520la%2520clase%2520Painter.html">Constructor de la clase Painter</a></li><li><a href="Constructor%2520de%2520la%2520cuadr%25C3%25ADcula.html">Constructor de la cuadrícula</a></li><li><a href="Painter.html">Painter</a></li><li><a href="RandomStep.html">RandomStep</a></li><li><a href="RandomWalkGenerator.html">RandomWalkGenerator</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ClassGrid">ClassGrid</a></li><li><a href="global.html#ClassGrid2">ClassGrid2</a></li><li><a href="global.html#ClassPainter">ClassPainter</a></li><li><a href="global.html#createRandomPath">createRandomPath</a></li><li><a href="global.html#main">main</a></li><li><a href="global.html#sleep">sleep</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 3.6.3</a> on Tue Apr 21 2020 09:39:10 GMT+0100 (GMT+01:00)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
